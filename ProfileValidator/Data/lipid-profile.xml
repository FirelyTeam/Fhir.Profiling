<?xml version="1.0" encoding="utf-8"?>
<Profile xmlns="http://hl7.org/fhir">
  <identifier value="urn:hl7.org:lipid-profile:v1" />
  <version value="1.0.0" />
  <name value="Lipid Profile" />
  <publisher value="HL7 International" />
  <telecom>
    <system value="email" />
    <value value="e.kramer@furore.com" />
  </telecom>
  <description value="Describes how the lab report is used for a standard Lipid Profile - Cholesterol, Triglyceride and Cholesterol fractions. Uses LOINC codes&#xD;&#xA;" />
  <code>
    <system value="http://loinc.org/" />
    <code value="58239-5" />
    <display value="lipid profile" />
  </code>
  <status value="draft" />
  <experimental value="true" />
  <date value="2014-04-17T00:00:00+02:00" />
  <requirements value="Covers example areas of Profile authoring and was created to serve as an example in the specification and during this tutorial" />
  <fhirVersion value="0.80" />
  <structure>
    <type value="Quantity" />
    <name value="lipidQuantity" />
    <element>
      <path value="Quantity" />
      <definition>
        <short value="Quantity as used in lipid measurements" />
        <formal value="Quantity as used in lipid measurements" />
        <comments value="Lipid measurements are expressed in mmol/L" />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Type" />
        </type>
        <constraint>
          <key value="3" />
          <name value="SHALL have a system" />
          <severity value="error" />
          <human value="If a code for the units is present, the system SHALL also be present" />
          <xpath value="not(exists(f:code)) or exists(f:system)" />
        </constraint>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ, IVL&lt;PQ&gt;, MO, CO, depending on the values" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SN (see also Range) or CQ" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Quantity.value" />
      <definition>
        <short value="Numerical value (with implicit precision)" />
        <formal value="The value of the measured amount. The value includes an implicit precision in the presentation of the value." />
        <comments value="The implicit precision in the value should always be honored. Monetary values have their own rules for handling precision (refer to standard accounting text books)." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="decimal" />
        </type>
        <mustSupport value="true" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.value, CO.value, MO.value, IVL.high or IVL.low depending on the value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SN.2  / CQ - N/A" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Quantity.value.extension" />
      <slicing>
        <discriminator value="Quantity.value.extension.url" />
        <ordered value="true" />
        <rules value="openAtEnd" />
      </slicing>
    </element>
    <element>
      <path value="Quantity.value.extension" />
      <name value="MyExtension" />
      <definition>
        <type>
          <code value="Extension" />
          <profile value="#_c4773f9b30a545baad9015cd171eb32c" />
        </type>
      </definition>
    </element>
    <element>
      <path value="Quantity.value.extension" />
      <name value="MyExtension" />
      <definition>
        <type>
          <code value="Extension" />
          <profile value="#_b95c58a28a114d7ca3e1eb4d2d8fd02e" />
        </type>
      </definition>
    </element>
    <element>
      <path value="Quantity.comparator" />
      <definition>
        <short value="&lt; | &lt;= | &gt;= | &gt; - how to understand the value" />
        <formal value="How the value should be understood and represented - whether the actual value is greater or less than the stated value due to measurement issues. E.g. if the comparator is &quot;&lt;&quot; , then the real value is &lt; stated value." />
        <comments value="This is labeled as &quot;Is Modifier&quot; because the comparator modifies the interpretation of the value significantly. If there is no comparator, then there is no modification of the value." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="code" />
        </type>
        <isModifier value="true" />
        <binding>
          <name value="QuantityCompararator" />
          <isExtensible value="false" />
          <conformance value="required" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/quantity-comparator" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="IVL properties" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SN.1  / CQ.1" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Quantity.units" />
      <definition>
        <short value="Unit representation" />
        <formal value="A human-readable form of the units." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="mmol/L" />
        <mustSupport value="true" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.unit" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Quantity.system" />
      <definition>
        <short value="System that defines coded unit form" />
        <formal value="The identification of the system that provides the coded form of the unit." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://unitsofmeasure.org/" />
        <mustSupport value="true" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CO.codeSystem, PQ.translation.codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Quantity.code" />
      <definition>
        <short value="Coded form of the unit" />
        <formal value="A computer processable form of the units in some unit representation system." />
        <comments value="The preferred system is UCUM, but SNOMED CT can also be used (for customary units) or ISO 4217 for currency.  The context of use may additionally require a code from a particular system (Unless the Quantity element has a dataAbsentReason flag)." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="mmol/L" />
        <mustSupport value="true" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.code, MO.currency, PQ.translation.code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
  </structure>
  <structure>
    <type value="Observation" />
    <name value="cholesterol" />
    <publish value="true" />
    <element>
      <path value="Observation" />
      <definition>
        <short value="Cholesterol measurement" />
        <formal value="Cholesterol measurement" />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Resource" />
        </type>
        <constraint>
          <key value="2" />
          <name value="reference range for quantity" />
          <severity value="error" />
          <human value="Can only have normal range if value is a quantity" />
          <xpath value="exists(f:valueQuantity) or not(exists(f:normalRange))" />
        </constraint>
        <constraint>
          <key value="chol-01" />
          <name value="Must have valueQuantity or comment" />
          <severity value="error" />
          <human value="If a Cholesterol value result is not available, use the comments field" />
          <xpath value="exists(f:valueQuantity) or exists(f:comment)" />
        </constraint>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="Observation[classCode=OBS, moodCode=EVN]" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name" />
      <definition>
        <short value="Type of observation (code / type)" />
        <formal value="Describes what was observed. Sometimes this is called the observation &quot;code&quot;." />
        <comments value="Since this is a Cholesterol observation, code will be fixed to the LOINC code for a Cholesterol measurement&#xD;&#xA;" />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="ObservationType" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/observation-codes" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-3-observation identifier" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding" />
      <definition>
        <short value="Code defined by a terminology system" />
        <formal value="A reference to a code defined by a terminology system." />
        <comments value="Codes may be defined very casually in enumerations, or code lists, up to very formal definitions such as SNOMED CT - see the V3 Core Principles for more information.  Ordering of codings is undefined and SHALL not be used to infer meaning." />
        <min value="0" />
        <max value="*" />
        <type>
          <code value="Coding" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="union(., ./translation)" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1-8, C*E.10-22" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.system" />
      <definition>
        <short value="Identity of the terminology system" />
        <formal value="The identification of the code system that defines the meaning of the symbol in the code." />
        <comments value="The URI may be an OID (urn:oid:...) or a UUID (urn:uuid:...).  OIDs and UUIDs SHALL be references to the HL7 OID registry. Otherwise, the URI should come from HL7's list of FHIR defined special URIs or it should de-reference to some definition that establish the system clearly and unambiguously." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://loinc.org/" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.3" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.version" />
      <definition>
        <short value="Version of the system - if relevant" />
        <formal value="The version of the code system which was used when choosing this code. Note that a well-maintained code system does not need the version reported, because the meaning of codes is consistent across versions. However this cannot consistently be assured. and When the meaning is not guaranteed to be consistent, the version SHOULD be exchanged." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="string" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystemVersion" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.7" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.code" />
      <definition>
        <short value="Symbol in syntax defined by the system" />
        <formal value="A symbol in syntax defined by the system. The symbol may be a predefined code or an expression in a syntax defined by the coding system (e.g. post-coordination)." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="35200-5" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.display" />
      <definition>
        <short value="Representation defined by the system" />
        <formal value="A representation of the meaning of the code in the system, following the rules of the system." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="Cholesterol" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CV.displayName" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.2 - but note this is not well followed" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.primary" />
      <definition>
        <short value="If this code was chosen directly by the user" />
        <formal value="Indicates that this code was chosen by a user directly - i.e. off a pick list of available items (codes or displays)." />
        <comments value="Amongst a set of alternatives, a directly chosen code is the most appropriate starting point for new translations." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="boolean" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CD.codingRationale" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="Sometimes implied by being first" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.valueSet" />
      <definition>
        <short value="Set this coding was chosen from" />
        <formal value="The set of possible coded values this coding was chosen from or constrained by." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/ValueSet" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CD.valueSet / CD.valueSetVersion" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.16 - .19" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.value[x]" />
      <definition>
        <short value="Actual result" />
        <formal value="The actual value of the cholesterol measurement" />
        <comments value="If not available, a comment should be given" />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="Quantity" />
          <profile value="#lipidQuantity" />
        </type>
        <condition value="chol-01" />
        <mustSupport value="true" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX.2, OBX.5, OBX.6" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.interpretation" />
      <definition>
        <short value="High, low, normal, etc." />
        <formal value="The assessment made based on the result of the observation." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="LipidInterpretation-v1" />
          <isExtensible value="true" />
          <conformance value="required" />
          <description value="This is an example valueset for the Lipid Profile example" />
          <referenceResource>
            <reference value="http://fhir.healthintersections.com.au/open/ValueSet/644" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="interpretationCode" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-8-interpretation codes" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.comments" />
      <definition>
        <short value="Comments about result" />
        <formal value="May include statements about significant, unexpected or unreliable values, or information about the source of the value where this may be relevant to the interpretation of the result." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <condition value="chol-01" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="subjectOf.observationEvent[code=&quot;annotation&quot;].value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="NTE.3 (partner NTE to OBX, or sometimes another (child?) OBX)" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.reliability" />
      <definition>
        <short value="ok | ongoing | early | questionable | calibrating | error +" />
        <formal value="An estimate of the degree to which quality issues have impacted on the value reported." />
        <comments value="Note that in most contexts, unreliable results are not recorded, deleted, or otherwise excluded, but it's not always possible to exclude them from the record. Interpreters of a result, whether human or machine, SHALL always either be aware of the status, or prevented from using the observation without being unaware that the reliability is not &quot;ok&quot;." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="ok" />
        <isModifier value="true" />
        <binding>
          <name value="ObservationReliability" />
          <isExtensible value="false" />
          <conformance value="required" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/observation-reliability" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="uncertaintyCode" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="Maybe OBX.8/OBX.9" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.bodySite" />
      <definition>
        <short value="Observed body part" />
        <formal value="Indicates where on the subject's body the observation was made." />
        <comments value="Only used if not implicit in code found in Observation.name." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="BodySite" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/body-site" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="targetSiteCode" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-20-observation site" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.identifier" />
      <definition>
        <short value="Unique Id for this particular observation" />
        <formal value="A unique identifier for the simple observation." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Identifier" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="id" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX.21" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.subject" />
      <definition>
        <short value="Who and/or what this is about" />
        <formal value="The thing the observation is being made about." />
        <comments value="The only circumstance in which the subject can be missing is when the observation is made by a device that does not know the patient. In this case, the observation SHALL be matched to a patient through some context/channel matching technique, and at this point, the observation should be updated." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/Patient" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="participation[typeCode=SBJ]" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="PID-3-patient ID list" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange" />
      <definition>
        <short value="Provides guide for interpretation" />
        <formal value="Guidance on how to interpret the value by comparison to a normal or recommended range." />
        <comments value="Most observations only have one generic reference range. Systems MAY choose to restrict to only supplying the relevant reference range based on knowledge about the patient (e.g. specific to the patient's age, gender, weight and other factors), but this may not be possible or appropriate. Whenever more than one reference range is supplied, the differences between them SHOULD be provided in the reference range and/or age properties." />
        <min value="1" />
        <max value="1" />
        <constraint>
          <key value="3" />
          <name value="reference range" />
          <severity value="error" />
          <human value="Must have at least a low or a high (and no comparators)" />
          <xpath value="(exists(f:low) or exists(f:high)) and not(exists(f:low/f:comparator)) and not(exists(f:high/f:comparator))" />
        </constraint>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=REFV]/target[classCode=OBS, moodCode=EVN]" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.low" />
      <definition>
        <short value="Low Range, if relevant" />
        <formal value="The value of the low bound of the reference range. If this is omitted, the low bound of the reference range is assumed to be meaningless. E.g. &lt;2.3." />
        <comments value="Do not use the comparator for &lt; or &gt;." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="Quantity" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="value:IVL_PQ.low" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-7-references range" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high" />
      <definition>
        <short value="High Range, if relevant" />
        <formal value="The value of the high bound of the reference range. If this is omitted, the high bound of the reference range is assumed to be meaningless. E.g. &gt;5." />
        <comments value="Do not use the comparator for &lt; or &gt;." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Quantity" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="value:IVL_PQ.high" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-7-references range" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.value" />
      <definition>
        <short value="Numerical value (with implicit precision)" />
        <formal value="The value of the measured amount. The value includes an implicit precision in the presentation of the value." />
        <comments value="The implicit precision in the value should always be honored. Monetary values have their own rules for handling precision (refer to standard accounting text books)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="decimal" />
        </type>
        <valueDecimal value="4.5" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.value, CO.value, MO.value, IVL.high or IVL.low depending on the value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SN.2  / CQ - N/A" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.units" />
      <definition>
        <short value="Unit representation" />
        <formal value="A human-readable form of the units." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="mmol/L" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.unit" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.system" />
      <definition>
        <short value="System that defines coded unit form" />
        <formal value="The identification of the system that provides the coded form of the unit." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://unitsofmeasure.org/" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CO.codeSystem, PQ.translation.codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.code" />
      <definition>
        <short value="Coded form of the unit" />
        <formal value="A computer processable form of the units in some unit representation system." />
        <comments value="The preferred system is UCUM, but SNOMED CT can also be used (for customary units) or ISO 4217 for currency.  The context of use may additionally require a code from a particular system (Unless the Quantity element has a dataAbsentReason flag)." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="mmol/L" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.code, MO.currency, PQ.translation.code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.meaning" />
      <definition>
        <short value="Indicates the meaning/use of this range of this range" />
        <formal value="Code for the meaning of the reference range." />
        <comments value="This SHOULD be populated if there is more than one range." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="ObservationRangeMeaning" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/referencerange-meaning" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="interpretationCode" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-10-nature of abnormal test?" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.age" />
      <definition>
        <short value="Applicable age range, if relevant" />
        <formal value="The age at which this reference range is applicable. This is a neonatal age (e.g. number of weeks at term) if the meaning says so." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="Range" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=PRCN].targetObservationCriterion[code=&quot;age&quot;].value" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.related" />
      <definition>
        <short value="Observations related to this observation" />
        <formal value="Related observations - either components, or previous observations, or statements of derivation." />
        <comments value="Normally, an observation will have either a value or a set of related observations. A few observations (e.g. apgar store) may have both a value and related observations (for apgar, the observations from which the measure is derived)." />
        <min value="0" />
        <max value="0" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outBoundRelationship" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="Relationships established by OBX-4 usage" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.extension" />
      <slicing>
        <discriminator value="Observation.extension.url" />
        <ordered value="true" />
        <rules value="openAtEnd" />
      </slicing>
    </element>
    <element>
      <path value="Observation.extension" />
      <name value="LDLCalculated" />
      <definition>
        <short value="dummy" />
        <formal value="dummy" />
        <comments value="dummy" />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Resource" />
          <profile value="#calculated" />
        </type>
      </definition>
    </element>
    <searchParam>
      <name value="_id" />
      <type value="token" />
      <documentation value="The logical resource id associated with the resource (must be supported by all servers)" />
    </searchParam>
    <searchParam>
      <name value="date" />
      <type value="date" />
      <documentation value="Obtained date/time. If the obtained element is a period, a date that falls in the period" />
      <xpath value="f:Observation/f:applies[x]" />
    </searchParam>
    <searchParam>
      <name value="name" />
      <type value="token" />
      <documentation value="The name of the observation type" />
      <xpath value="f:Observation/f:name" />
    </searchParam>
    <searchParam>
      <name value="name-value-[x]" />
      <type value="composite" />
      <documentation value="Both name and one of the value parameters" />
    </searchParam>
    <searchParam>
      <name value="performer" />
      <type value="reference" />
      <documentation value="Who and/or what performed the observation" />
      <xpath value="f:Observation/f:performer" />
    </searchParam>
    <searchParam>
      <name value="related" />
      <type value="composite" />
      <documentation value="Related Observations - search on related-type and related-target together" />
    </searchParam>
    <searchParam>
      <name value="related-target" />
      <type value="reference" />
      <documentation value="Observation that is related to this one" />
      <xpath value="f:Observation/f:related/f:target" />
    </searchParam>
    <searchParam>
      <name value="related-type" />
      <type value="token" />
      <documentation value="has-component | has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by" />
      <xpath value="f:Observation/f:related/f:type" />
    </searchParam>
    <searchParam>
      <name value="reliability" />
      <type value="token" />
      <documentation value="The reliability of the observation" />
      <xpath value="f:Observation/f:reliability" />
    </searchParam>
    <searchParam>
      <name value="specimen" />
      <type value="reference" />
      <documentation value="Specimen used for this observation" />
      <xpath value="f:Observation/f:specimen" />
    </searchParam>
    <searchParam>
      <name value="status" />
      <type value="token" />
      <documentation value="The status of the observation" />
      <xpath value="f:Observation/f:status" />
    </searchParam>
    <searchParam>
      <name value="subject" />
      <type value="reference" />
      <documentation value="The subject that the observation is about" />
      <xpath value="f:Observation/f:subject" />
    </searchParam>
    <searchParam>
      <name value="value-concept" />
      <type value="token" />
      <documentation value="The value of the observation, if the value is a CodeableConcept" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-date" />
      <type value="date" />
      <documentation value="The value of the observation, if the value is a Period" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-quantity" />
      <type value="quantity" />
      <documentation value="The value of the observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-string" />
      <type value="string" />
      <documentation value="The value of the observation, if the value is a string, and also searches in CodeableConcept.text" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
  </structure>
  <structure>
    <type value="Observation" />
    <name value="triglyceride" />
    <publish value="true" />
    <element>
      <path value="Observation.name" />
      <definition>
        <short value="Type of observation (code / type)" />
        <formal value="Describes what was observed. Sometimes this is called the observation &quot;code&quot;." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="ObservationType" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/observation-codes" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-3-observation identifier" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding" />
      <definition>
        <short value="Code defined by a terminology system" />
        <formal value="A reference to a code defined by a terminology system." />
        <comments value="Codes may be defined very casually in enumerations, or code lists, up to very formal definitions such as SNOMED CT - see the V3 Core Principles for more information.  Ordering of codings is undefined and SHALL not be used to infer meaning." />
        <min value="0" />
        <max value="*" />
        <type>
          <code value="Coding" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="union(., ./translation)" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1-8, C*E.10-22" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.system" />
      <definition>
        <short value="Identity of the terminology system" />
        <formal value="The identification of the code system that defines the meaning of the symbol in the code." />
        <comments value="The URI may be an OID (urn:oid:...) or a UUID (urn:uuid:...).  OIDs and UUIDs SHALL be references to the HL7 OID registry. Otherwise, the URI should come from HL7's list of FHIR defined special URIs or it should de-reference to some definition that establish the system clearly and unambiguously." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://loinc.org/" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.3" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.version" />
      <definition>
        <short value="Version of the system - if relevant" />
        <formal value="The version of the code system which was used when choosing this code. Note that a well-maintained code system does not need the version reported, because the meaning of codes is consistent across versions. However this cannot consistently be assured. and When the meaning is not guaranteed to be consistent, the version SHOULD be exchanged." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="string" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystemVersion" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.7" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.code" />
      <definition>
        <short value="Symbol in syntax defined by the system" />
        <formal value="A symbol in syntax defined by the system. The symbol may be a predefined code or an expression in a syntax defined by the coding system (e.g. post-coordination)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="35217-9" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.name.coding.display" />
      <definition>
        <short value="Representation defined by the system" />
        <formal value="A representation of the meaning of the code in the system, following the rules of the system." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="Triglyceride" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CV.displayName" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.2 - but note this is not well followed" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.comments" />
      <definition>
        <short value="Comments about result" />
        <formal value="May include statements about significant, unexpected or unreliable values, or information about the source of the value where this may be relevant to the interpretation of the result." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <condition value="chol-01" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="subjectOf.observationEvent[code=&quot;annotation&quot;].value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="NTE.3 (partner NTE to OBX, or sometimes another (child?) OBX)" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange" />
      <definition>
        <short value="Provides guide for interpretation" />
        <formal value="Guidance on how to interpret the value by comparison to a normal or recommended range." />
        <comments value="Most observations only have one generic reference range. Systems MAY choose to restrict to only supplying the relevant reference range based on knowledge about the patient (e.g. specific to the patient's age, gender, weight and other factors), but this may not be possible or appropriate. Whenever more than one reference range is supplied, the differences between them SHOULD be provided in the reference range and/or age properties." />
        <min value="0" />
        <max value="*" />
        <constraint>
          <key value="3" />
          <name value="reference range" />
          <severity value="error" />
          <human value="Must have at least a low or a high (and no comparators)" />
          <xpath value="(exists(f:low) or exists(f:high)) and not(exists(f:low/f:comparator)) and not(exists(f:high/f:comparator))" />
        </constraint>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=REFV]/target[classCode=OBS, moodCode=EVN]" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.low" />
      <definition>
        <short value="Low Range, if relevant" />
        <formal value="The value of the low bound of the reference range. If this is omitted, the low bound of the reference range is assumed to be meaningless. E.g. &lt;2.3." />
        <comments value="Do not use the comparator for &lt; or &gt;." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="Quantity" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="value:IVL_PQ.low" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-7-references range" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high" />
      <definition>
        <short value="High Range, if relevant" />
        <formal value="The value of the high bound of the reference range. If this is omitted, the high bound of the reference range is assumed to be meaningless. E.g. &gt;5." />
        <comments value="Do not use the comparator for &lt; or &gt;." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Quantity" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="value:IVL_PQ.high" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-7-references range" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.value" />
      <definition>
        <short value="Numerical value (with implicit precision)" />
        <formal value="The value of the measured amount. The value includes an implicit precision in the presentation of the value." />
        <comments value="The implicit precision in the value should always be honored. Monetary values have their own rules for handling precision (refer to standard accounting text books)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="decimal" />
        </type>
        <valueDecimal value="4.5" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.value, CO.value, MO.value, IVL.high or IVL.low depending on the value" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SN.2  / CQ - N/A" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.units" />
      <definition>
        <short value="Unit representation" />
        <formal value="A human-readable form of the units." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="mmol/L" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.unit" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.system" />
      <definition>
        <short value="System that defines coded unit form" />
        <formal value="The identification of the system that provides the coded form of the unit." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://unitsofmeasure.org/" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CO.codeSystem, PQ.translation.codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.high.code" />
      <definition>
        <short value="Coded form of the unit" />
        <formal value="A computer processable form of the units in some unit representation system." />
        <comments value="The preferred system is UCUM, but SNOMED CT can also be used (for customary units) or ISO 4217 for currency.  The context of use may additionally require a code from a particular system (Unless the Quantity element has a dataAbsentReason flag)." />
        <min value="0" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="mmol/L" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="PQ.code, MO.currency, PQ.translation.code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="(see OBX.6 etc) / CQ.2" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.meaning" />
      <definition>
        <short value="Indicates the meaning/use of this range of this range" />
        <formal value="Code for the meaning of the reference range." />
        <comments value="This SHOULD be populated if there is more than one range." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="ObservationRangeMeaning" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/referencerange-meaning" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="interpretationCode" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX-10-nature of abnormal test?" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="Observation.referenceRange.age" />
      <definition>
        <short value="Applicable age range, if relevant" />
        <formal value="The age at which this reference range is applicable. This is a neonatal age (e.g. number of weeks at term) if the meaning says so." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="Range" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=PRCN].targetObservationCriterion[code=&quot;age&quot;].value" />
        </mapping>
      </definition>
    </element>
    <searchParam>
      <name value="_id" />
      <type value="token" />
      <documentation value="The logical resource id associated with the resource (must be supported by all servers)" />
    </searchParam>
    <searchParam>
      <name value="date" />
      <type value="date" />
      <documentation value="Obtained date/time. If the obtained element is a period, a date that falls in the period" />
      <xpath value="f:Observation/f:applies[x]" />
    </searchParam>
    <searchParam>
      <name value="name" />
      <type value="token" />
      <documentation value="The name of the observation type" />
      <xpath value="f:Observation/f:name" />
    </searchParam>
    <searchParam>
      <name value="name-value-[x]" />
      <type value="composite" />
      <documentation value="Both name and one of the value parameters" />
    </searchParam>
    <searchParam>
      <name value="performer" />
      <type value="reference" />
      <documentation value="Who and/or what performed the observation" />
      <xpath value="f:Observation/f:performer" />
    </searchParam>
    <searchParam>
      <name value="related" />
      <type value="composite" />
      <documentation value="Related Observations - search on related-type and related-target together" />
    </searchParam>
    <searchParam>
      <name value="related-target" />
      <type value="reference" />
      <documentation value="Observation that is related to this one" />
      <xpath value="f:Observation/f:related/f:target" />
    </searchParam>
    <searchParam>
      <name value="related-type" />
      <type value="token" />
      <documentation value="has-component | has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by" />
      <xpath value="f:Observation/f:related/f:type" />
    </searchParam>
    <searchParam>
      <name value="reliability" />
      <type value="token" />
      <documentation value="The reliability of the observation" />
      <xpath value="f:Observation/f:reliability" />
    </searchParam>
    <searchParam>
      <name value="specimen" />
      <type value="reference" />
      <documentation value="Specimen used for this observation" />
      <xpath value="f:Observation/f:specimen" />
    </searchParam>
    <searchParam>
      <name value="status" />
      <type value="token" />
      <documentation value="The status of the observation" />
      <xpath value="f:Observation/f:status" />
    </searchParam>
    <searchParam>
      <name value="subject" />
      <type value="reference" />
      <documentation value="The subject that the observation is about" />
      <xpath value="f:Observation/f:subject" />
    </searchParam>
    <searchParam>
      <name value="value-concept" />
      <type value="token" />
      <documentation value="The value of the observation, if the value is a CodeableConcept" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-date" />
      <type value="date" />
      <documentation value="The value of the observation, if the value is a Period" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-quantity" />
      <type value="quantity" />
      <documentation value="The value of the observation, if the value is a Quantity, or a SampledData (just search on the bounds of the values in sampled data)" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
    <searchParam>
      <name value="value-string" />
      <type value="string" />
      <documentation value="The value of the observation, if the value is a string, and also searches in CodeableConcept.text" />
      <xpath value="f:Observation/f:value[x]" />
    </searchParam>
  </structure>
  <structure>
    <type value="DiagnosticReport" />
    <name value="lipidPanel" />
    <publish value="true" />
    <element>
      <path value="DiagnosticReport" />
      <definition>
        <short value="Lipid Lab Report" />
        <formal value="The findings and interpretation of a general lipd lab profile" />
        <comments value="Note that this profile doesn't mention workflow  elements - it's solely concerned with the semantics of a lipid report. Things that are ignored are not constrained" />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="Resource" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="Observation[classCode=OBS, moodCode=EVN]" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name" />
      <definition>
        <short value="Name/Code for this diagnostic report" />
        <formal value="A code or name that describes this diagnostic report." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="DiagnosticReportNames" />
          <isExtensible value="true" />
          <conformance value="preferred" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/report-names" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBR-4-Universal Service ID (V2 doesn't provide an easy way to indicate both the ordered test and the performed panel)" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding" />
      <definition>
        <short value="Code defined by a terminology system" />
        <formal value="A reference to a code defined by a terminology system." />
        <comments value="Codes may be defined very casually in enumerations, or code lists, up to very formal definitions such as SNOMED CT - see the V3 Core Principles for more information.  Ordering of codings is undefined and SHALL not be used to infer meaning." />
        <min value="0" />
        <max value="*" />
        <type>
          <code value="Coding" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="union(., ./translation)" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1-8, C*E.10-22" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.system" />
      <definition>
        <short value="Identity of the terminology system" />
        <formal value="The identification of the code system that defines the meaning of the symbol in the code." />
        <comments value="The URI may be an OID (urn:oid:...) or a UUID (urn:uuid:...).  OIDs and UUIDs SHALL be references to the HL7 OID registry. Otherwise, the URI should come from HL7's list of FHIR defined special URIs or it should de-reference to some definition that establish the system clearly and unambiguously." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="uri" />
        </type>
        <valueUri value="http://loinc.org/" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystem" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.3" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.version" />
      <definition>
        <short value="Version of the system - if relevant" />
        <formal value="The version of the code system which was used when choosing this code. Note that a well-maintained code system does not need the version reported, because the meaning of codes is consistent across versions. However this cannot consistently be assured. and When the meaning is not guaranteed to be consistent, the version SHOULD be exchanged." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="string" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./codeSystemVersion" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.7" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.code" />
      <definition>
        <short value="Symbol in syntax defined by the system" />
        <formal value="A symbol in syntax defined by the system. The symbol may be a predefined code or an expression in a syntax defined by the coding system (e.g. post-coordination)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="code" />
        </type>
        <valueCode value="57698-3" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="./code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.1" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.display" />
      <definition>
        <short value="Representation defined by the system" />
        <formal value="A representation of the meaning of the code in the system, following the rules of the system." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="string" />
        </type>
        <valueString value="Lipid Panel with direct LDL" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CV.displayName" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.2 - but note this is not well followed" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.primary" />
      <definition>
        <short value="If this code was chosen directly by the user" />
        <formal value="Indicates that this code was chosen by a user directly - i.e. off a pick list of available items (codes or displays)." />
        <comments value="Amongst a set of alternatives, a directly chosen code is the most appropriate starting point for new translations." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="boolean" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CD.codingRationale" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="Sometimes implied by being first" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.name.coding.valueSet" />
      <definition>
        <short value="Set this coding was chosen from" />
        <formal value="The set of possible coded values this coding was chosen from or constrained by." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/ValueSet" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="CD.valueSet / CD.valueSetVersion" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="C*E.16 - .19" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.subject" />
      <definition>
        <short value="The subject of the report, usually, but not always, the patient" />
        <formal value="The subject of the report. Usually, but not always, this is a patient. However diagnostic services also perform analyses on specimens collected from a variety of other sources." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/Patient" />
          <aggregation value="referenced" />
          <aggregation value="bundled" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="participation[typeCode=SBJ]" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="PID-3-Patient ID List (no V2 mapping for Group or Device)" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.performer" />
      <definition>
        <short value="Responsible Diagnostic Service" />
        <formal value="The diagnostic service that is responsible for issuing the report." />
        <comments value="This is not necessarily the source of the atomic data items - it is the entity that takes responsibility for the clinical report." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/Practitioner" />
          <aggregation value="referenced" />
          <aggregation value="bundled" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="participation[typeCode=AUT].role[classCode=ASSIGN].scoper" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="PRT-8-Participation Organization (where this PRT-4-Participation = &quot;PO&quot;)" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.requestDetail" />
      <definition>
        <short value="What was requested" />
        <formal value="Details concerning a test requested." />
        <comments value="Note: Usually there is one test request for each result, however in some circumstances multiple test requests may be represented using a single test result resource. Note that there are also cases where one request leads to multiple reports." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/DiagnosticOrder" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=FLFS].target" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.serviceCategory" />
      <definition>
        <short value="Biochemistry, Hematology etc." />
        <formal value="The section of the diagnostic service that performs the examination e.g. biochemistry, hematology, MRI." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="DiagnosticServiceSection" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/diagnostic-service-sections" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="inboundRelationship[typeCode=COMP].source[classCode=LIST, moodCode=EVN, code &lt; LabService].code" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBR-24-Diagnostic Service Section ID" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.specimen" />
      <definition>
        <short value="Specimens this report is based on" />
        <formal value="Details about the specimens on which this Disagnostic report is based." />
        <comments value="If the specimen is sufficiently specified with a code in the Test result name, then this additional data may be redundant. If there are multiple specimens, these may be represented per Observation or group." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/Specimen" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="participation[typeCode=SBJ]" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="SPM" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.result" />
      <slicing>
        <discriminator value="name" />
        <ordered value="true" />
        <rules value="closed" />
      </slicing>
      <definition>
        <short value="Observations - simple, or complex nested groups" />
        <formal value="Observations that are part of this diagnostic report. Observations can be simple name/value pairs (e.g. &quot;atomic&quot; results), or they can be grouping observations that include references to other members of the group (e.g. &quot;panels&quot;)." />
        <comments value="Cardinality 3..4, since chol, trig, hdlc are mandatory, ldlc is optional" />
        <min value="2" />
        <max value="2" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/Observation" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=COMP].target" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.result" />
      <name value="cholesterol" />
      <definition>
        <short value="Cholesterol observation" />
        <formal value="Observations that are part of this diagnostic report. Observations can be simple name/value pairs (e.g. &quot;atomic&quot; results), or they can be grouping observations that include references to other members of the group (e.g. &quot;panels&quot;)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="#cholesterol" />
          <aggregation value="bundled" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=COMP].target" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.result" />
      <name value="triglyceride" />
      <definition>
        <short value="Triglyceride observation" />
        <formal value="Observations that are part of this diagnostic report. Observations can be simple name/value pairs (e.g. &quot;atomic&quot; results), or they can be grouping observations that include references to other members of the group (e.g. &quot;panels&quot;)." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="#triglyceride" />
          <aggregation value="bundled" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=COMP].target" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.imagingStudy" />
      <definition>
        <short value="Reference to full details of imaging associated with the diagnostic report" />
        <formal value="One or more links to full details of any imaging performed during the diagnostic investigation. Typically, this is imaging performed by DICOM enabled modalities, but this is not required. A fully enabled PACS viewer can use this information to provide views of the source images." />
        <comments value="ImagingStudy and image are somewhat overlapping - typically, an image in the image list will also be found in the imaging study resource. However the imaging study and image lists cater to different types of displays for different types of purposes. Neither, either, or both may be provided." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="ResourceReference" />
          <profile value="http://hl7.org/fhir/profiles/ImagingStudy" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=COMP].target[classsCode=DGIMG, moodCode=EVN]" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.image" />
      <definition>
        <short value="Key images associated with this report" />
        <formal value="A list of key images associated with this report. The images are generally created during the diagnostic process, and may be directly of the patient, or of treated specimens (i.e. slides of interest)." />
        <min value="0" />
        <max value="0" />
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="outboundRelationship[typeCode=COMP].target" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX?" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.codedDiagnosis" />
      <definition>
        <short value="Codes for the conclusion" />
        <formal value="Codes for the conclusion." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="CodeableConcept" />
        </type>
        <isModifier value="false" />
        <binding>
          <name value="AdjunctDiagnosis" />
          <isExtensible value="true" />
          <conformance value="example" />
          <referenceResource>
            <reference value="http://hl7.org/fhir/vs/clinical-findings" />
          </referenceResource>
        </binding>
        <mapping>
          <identity value="rim" />
          <map value="inboundRelationship[typeCode=SPRT].source[classCode=OBS, moodCode=EVN, code=LOINC:54531-9].value (type=CD)" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX" />
        </mapping>
      </definition>
    </element>
    <element>
      <path value="DiagnosticReport.presentedForm" />
      <definition>
        <short value="Entire Report as issued" />
        <formal value="Rich text representation of the entire result as issued by the diagnostic service. Multiple formats are allowed but they SHALL be semantically equivalent." />
        <comments value="Application/pdf is recommended as the most reliable and interoperable in this context." />
        <min value="0" />
        <max value="0" />
        <type>
          <code value="Attachment" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="text (type=ED)" />
        </mapping>
        <mapping>
          <identity value="v2" />
          <map value="OBX" />
        </mapping>
      </definition>
    </element>
    <searchParam>
      <name value="_id" />
      <type value="token" />
      <documentation value="The logical resource id associated with the resource (must be supported by all servers)" />
    </searchParam>
    <searchParam>
      <name value="date" />
      <type value="date" />
      <documentation value="The clinically relevant time of the report" />
      <xpath value="f:DiagnosticReport/f:diagnostic[x]" />
    </searchParam>
    <searchParam>
      <name value="diagnosis" />
      <type value="token" />
      <documentation value="A coded diagnosis on the report" />
      <xpath value="f:DiagnosticReport/f:codedDiagnosis" />
    </searchParam>
    <searchParam>
      <name value="identifier" />
      <type value="token" />
      <documentation value="An identifier for the report" />
      <xpath value="f:DiagnosticReport/f:identifier" />
    </searchParam>
    <searchParam>
      <name value="image" />
      <type value="reference" />
      <documentation value="Reference to the image source" />
      <xpath value="f:DiagnosticReport/f:image/f:link" />
    </searchParam>
    <searchParam>
      <name value="issued" />
      <type value="date" />
      <documentation value="When the report was issued" />
      <xpath value="f:DiagnosticReport/f:issued" />
    </searchParam>
    <searchParam>
      <name value="name" />
      <type value="token" />
      <documentation value="The name of the report (e.g. the code for the report as a whole, as opposed to codes for the atomic results, which are the names on the observation resource referred to from the result)" />
      <xpath value="f:DiagnosticReport/f:name" />
    </searchParam>
    <searchParam>
      <name value="performer" />
      <type value="reference" />
      <documentation value="Who was the source of the report (organization)" />
      <xpath value="f:DiagnosticReport/f:performer" />
    </searchParam>
    <searchParam>
      <name value="request" />
      <type value="reference" />
      <documentation value="What was requested" />
      <xpath value="f:DiagnosticReport/f:requestDetail" />
    </searchParam>
    <searchParam>
      <name value="result" />
      <type value="reference" />
      <documentation value="Link to an atomic result (observation resource)" />
      <xpath value="f:DiagnosticReport/f:result" />
    </searchParam>
    <searchParam>
      <name value="service" />
      <type value="token" />
      <documentation value="Which diagnostic discipline/department created the report" />
      <xpath value="f:DiagnosticReport/f:serviceCategory" />
    </searchParam>
    <searchParam>
      <name value="specimen" />
      <type value="reference" />
      <documentation value="The specimen details" />
      <xpath value="f:DiagnosticReport/f:specimen" />
    </searchParam>
    <searchParam>
      <name value="status" />
      <type value="token" />
      <documentation value="The status of the report" />
      <xpath value="f:DiagnosticReport/f:status" />
    </searchParam>
    <searchParam>
      <name value="subject" />
      <type value="reference" />
      <documentation value="The subject of the report" />
      <xpath value="f:DiagnosticReport/f:subject" />
    </searchParam>
  </structure>
  <structure>
    <type value="MessageHeader" />
    <name value="newLipidResult" />
    <publish value="true" />
    <element>
      <path value="MessageHeader.data" />
      <definition>
        <short value="The actual content of the message" />
        <formal value="The actual data of the message - a reference to the root/focus class of the event." />
        <comments value="The data is defined where the transaction type is defined. The transaction data is always included in the bundle that is the full message.  Only the root resource is specified.  The resources it references should be contained in the bundle but are not also listed here.  Multiple repetitions are allowed to cater for merges and other situations with multiple focal targets." />
        <min value="1" />
        <max value="1" />
        <type>
          <code value="ResourceReference" />
          <profile value="#lipidPanel" />
          <aggregation value="bundled" />
        </type>
        <isModifier value="false" />
        <mapping>
          <identity value="rim" />
          <map value="unique(./controlAct[classCode=&quot;CACT&quot; and classCode=&quot;EVN&quot; and isNormalAct()]/participation[typeCode=&quot;SUBJ&quot; and isNormalParticipation]/role or ./controlAct[classCode=&quot;CACT&quot; and classCode=&quot;EVN&quot; and isNormalAct()]/outboundRelationship[typeCode=&quot;SBJ&quot; and isNormalActRelatoinship]/target)" />
        </mapping>
      </definition>
    </element>
    <searchParam>
      <name value="_id" />
      <type value="token" />
      <documentation value="The logical resource id associated with the resource (must be supported by all servers)" />
    </searchParam>
  </structure>
  <extensionDefn>
    <code value="calculated" />
    <contextType value="resource" />
    <context value="Observation.valueQuantity" />
    <definition>
      <short value="LDL is Calculated" />
      <formal value="True if the value is calculated from other observations" />
      <comments value="E.g. True if the LDL value is calculated from Chol, Trig, and HDLC" />
      <type>
        <code value="boolean" />
      </type>
    </definition>
  </extensionDefn>
</Profile>